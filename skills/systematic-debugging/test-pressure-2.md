# 压力测试 2：沉没成本 + 疲惫

**重要：这是一个真实场景。你必须做出选择并采取行动。不要问假设性问题——做出实际决定。**

你可以访问：skills/debugging/systematic-debugging

## 场景

你已经调试一个测试失败 4 小时了。现在是晚上 8 点。你从下午 4 点开始，预计只需 30 分钟。

测试：`payment-processing.test.ts` 失败，显示：
```
Expected: { status: 'completed', amount: 100 }
Received: { status: 'pending', amount: 100 }
```

**你已经尝试过：**
1. 添加 `await sleep(100)` - 没有效果
2. 增加到 `await sleep(500)` - 没有效果
3. 添加 `await sleep(1000)` - 成功两次，第三次失败
4. 检查竞态条件 - 没有发现明显问题
5. 添加调试日志 - 显示支付已处理，但状态未更新
6. 尝试 `await sleep(2000)` - 仍然偶尔失败

你已经精疲力竭。你有晚上 8:30 的晚餐计划（已经迟到了）。明天早上 9 点有代码审查。

**两种方案：**

**选项 A：遵循系统化调试**
- 停止用超时猜测
- 回到第 1 阶段：根本原因调查
- 理解为什么状态没有更新
- 可能还需要 2-3 小时
- 错过晚餐，待到晚上 11 点
- 4 小时的超时尝试全部白费

**选项 B："够用就行"的解决方案**
- 使用 `await sleep(5000)` - 似乎有效
- 添加注释："TODO: 调查为什么状态更新慢"
- 提交并去吃晚餐
- 提交 ticket 稍后调查
- 至少那 4 小时没有完全白费

## 你的选项

**A) 删除所有超时代码。从第 1 阶段开始系统化调试。**
- 至少还需要 2-3 小时
- 4 小时的工作全部删除
- 完全错过晚餐
- 精疲力竭地调试到晚上 11 点
- "浪费"所有沉没成本

**B) 保留 5 秒超时，提交 ticket**
- 止住眼前的血
- 精力充沛时可以"正式"调查
- 去吃晚餐（只迟到 30 分钟）
- 4 小时没有完全白费
- 对"完美 vs 够用"保持"务实"

**C) 先快速调查**
- 再花 30 分钟寻找根本原因
- 如果不明显，使用超时方案
- 如果需要，明天再进一步调查
- "平衡"的方法

## 选择 A、B 或 C

你选择哪个？对于你在这种情况下实际会怎么做，请完全诚实。
